<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>2.5. Files &mdash; Hands-on Python Tutorial for Python 3</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="_static/sidebar.js"></script>
    <link rel="top" title="Hands-on Python Tutorial for Python 3" href="index.html" />
    <link rel="up" title="2. Objects and Methods" href="ch2.html" />
    <link rel="next" title="2.6. Summary" href="objectsummary.html" />
    <link rel="prev" title="2.4. Graphics" href="graphics.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="objectsummary.html" title="2.6. Summary"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="graphics.html" title="2.4. Graphics"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Hands-on Python Tutorial</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="ch2.html" accesskey="U">2. Objects and Methods</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="files">
<span id="index-0"></span><span id="id1"></span><h1>2.5. Files<a class="headerlink" href="#files" title="Permalink to this headline">¶</a></h1>
<p>This section fits here logically (as an important built-in type of
object) but it is not needed for the next chapter, <a class="reference internal" href="ch3.html#more-on-flow"><span>More On Flow of Control</span></a>.</p>
<p>Thus far you have been able to save programs, but anything produced
during the execution of a program has been lost when the program
ends. Data has not <em>persisted</em> past the end of execution. Just as
programs live on in files, you can generate and read data files in
Python that persist after your program has finished running.</p>
<p>As far as Python is concerned, a file is just a string (often very
large!) stored on your file system, that you can read or write,
gradually or all together.</p>
<p><em>Directory</em> is an old name for a folder.  These ideas go back far enough to the
time before directories got a graphical folder representation.  For this
section we use the word directory to mean the same thing as folder.</p>
<div class="section" id="writing-files">
<span id="index-1"></span><h2>2.5.1. Writing Files<a class="headerlink" href="#writing-files" title="Permalink to this headline">¶</a></h2>
<p><em>Open a directory window for your Python program directory.</em>
First note that there is no file named sample.txt.</p>
<p><em>Make sure</em> you have started Idle so the current directory is your
Python program directory.</p>
<p>Run the example program <code class="docutils literal"><span class="pre">firstFile.py</span></code>, shown below:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="n">outFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;sample.txt&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;My first output file!&#39;</span><span class="p">)</span>
<span class="n">outFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>The first line creates a file object, which links Python to your
computer&#8217;s file system. The first parameter in the file constructor
gives the file name, <code class="docutils literal"><span class="pre">sample.txt</span></code>. The second parameter indicates
how you use the file. The <code class="docutils literal"><span class="pre">'w'</span></code> is short for <strong>w</strong>rite, so you will
be creating and <em>writing</em> to a file.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the file already existed,  the old contents are
<em>destroyed</em>.</p>
</div>
<p>If you do not use
any operating system directory separators in the name (<code class="docutils literal"><span class="pre">'\'</span></code> or <code class="docutils literal"><span class="pre">'/'</span></code>
depending on your operating system), then the file will lie in the
current directory. The assignment statement gives the Python file
object the name <code class="docutils literal"><span class="pre">outFile</span></code>.</p>
<p>The second line writes the specified string to the file.</p>
<p>The last line is important to clean up. Until this line, this
Python program controls the file, and nothing may be actually
written to an operating system file yet:  Since initiating a file operation
is thousands of times
slower than memory operations, Python <em>buffers</em> data, saving small
amounts and writing a larger chunk all at once.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The <code class="docutils literal"><span class="pre">close</span></code>
line is essential for Python to make sure everything is really
written, and to relinquish control of the file.</p>
</div>
<p>It is a common bug
to write a program where you have the code to add all the data you
want to a file, but the program does not end up creating a file.
Usually this means you forgot to close the file.</p>
<p>Now switch focus and look at a directory window for the current
directory. You should now see a file <code class="docutils literal"><span class="pre">sample.txt</span></code>. You can open
it in Idle (or your favorite word processor) and see its contents.</p>
<p>For the next example, run the example program <code class="docutils literal"><span class="pre">nextFile.py</span></code>, shown below, which has two
calls to the write method:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="n">outFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;sample2.txt&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;My second output file!&#39;</span><span class="p">)</span>
<span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;Write some more.&#39;</span><span class="p">)</span>
<span class="n">outFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Now look at the file, <code class="docutils literal"><span class="pre">sample2.txt</span></code>. Open it in Idle. It may not
be what you expect! The write method for the file is not quite like
a <code class="docutils literal"><span class="pre">print</span></code> function. It does not add anything to the file except
<em>exactly</em> the data you tell it to write. If you want a newline, you
must indicate it <em>explicitly</em>. Recall the newline code
<code class="docutils literal"><span class="pre">'\n'</span></code>. Run the example program <code class="docutils literal"><span class="pre">revisedFile.py</span></code>,
shown below, which adds newline codes:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="n">outFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;sample3.txt&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;A revised output file!</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
<span class="n">outFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;Write some more.</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
<span class="n">outFile</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Check the contents of sample3.txt.</p>
</div>
<div class="section" id="reading-files">
<span id="index-2"></span><h2>2.5.2. Reading Files<a class="headerlink" href="#reading-files" title="Permalink to this headline">¶</a></h2>
<p>Run the example program
<code class="docutils literal"><span class="pre">printFile.py</span></code>, shown below:</p>
<div class="highlight-python3"><div class="highlight"><pre><span class="sd">&#39;&#39;&#39;Quick illustration of reading a file.</span>
<span class="sd">(needs revisedFile.py run first to create sample3.txt)</span>
<span class="sd">&#39;&#39;&#39;</span>

<span class="n">inFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;sample3.txt&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span>
<span class="n">contents</span> <span class="o">=</span> <span class="n">inFile</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">contents</span><span class="p">)</span>
</pre></div>
</div>
<p>Now you have come full circle: what one Python program has written
into the file <code class="docutils literal"><span class="pre">sample3.txt</span></code>, another has read and displayed.</p>
<p>In the first line of the program an operating system file (<code class="docutils literal"><span class="pre">sample3.txt</span></code>) is
associated again with a Python variable name (<code class="docutils literal"><span class="pre">inFile</span></code>). The
second parameter again gives the mode of operation, but this time
it is <code class="docutils literal"><span class="pre">'r',</span></code> short for <strong>r</strong>ead. This file, <code class="docutils literal"><span class="pre">sample3.txt</span></code>, should
already exist, and the intention is to read from it. This is the
most common mode for a file, so the <code class="docutils literal"><span class="pre">'r'</span></code> parameter is actually
<em>optional</em>.</p>
<p>The <code class="docutils literal"><span class="pre">read</span></code> method returns all the file&#8217;s data as a single string,
here assigned to the variable <code class="docutils literal"><span class="pre">contents</span></code>. Using the <code class="docutils literal"><span class="pre">close</span></code> method is
generally optional with files being read. There is nothing to lose
if a program ends without closing a file that was being read. <a class="footnote-reference" href="#id3" id="id2">[1]</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>There are three related but distinct concepts related to files.
Beginners often get confused and try to merge several in their head
or substitute one for another:</p>
<ol class="last arabic simple">
<li>The <em>file name</em>  is a string that identifies the file in your
computer&#8217;s file system.</li>
<li>You need the file name to <code class="docutils literal"><span class="pre">open</span></code> a file creating a <em>file</em> object,
but the file object (that I tend to call <code class="docutils literal"><span class="pre">inFile</span></code> or <code class="docutils literal"><span class="pre">outFile</span></code>)
is not the same as the name of the file on your hard drive.  You
assign it to a variable name just for use inside your program.</li>
<li>There is still one more step to the most important part, the <em>contents</em>
of the file.  The <code class="docutils literal"><span class="pre">read</span></code> method for a file object reads and <em>returns</em>
existing content, while the <code class="docutils literal"><span class="pre">write</span></code> method writes new content
into the file.</li>
</ol>
</div>
<p>There are other methods to read just parts of files (that you can look up
in the Python documentation),
but for this tutorial, reading the whole file with the <code class="docutils literal"><span class="pre">read</span></code> method
is sufficient.</p>
<div class="section" id="printupper-exercise">
<h3>2.5.2.1. PrintUpper Exercise<a class="headerlink" href="#printupper-exercise" title="Permalink to this headline">¶</a></h3>
<p>Make the following programs in sequence. Be sure to save the
programs in the same directory as where you start the idle shortcut
and where you have all the sample text files:</p>
<ol class="loweralpha simple">
<li>printUpper.py: read the contents of the sample2.txt file
and print the contents out in upper case. (This should use file
operations and should work no matter what the contents are in
sample2.txt. Do not assume the particular string written by
<code class="docutils literal"><span class="pre">nextFile.py</span></code>!)</li>
<li>fileUpper.py: <em>prompt</em> the user for a file name, read and
print the contents of the requested file in upper case.</li>
<li>* copyFileUpper.py: modify fileUpper.py to write the upper
case contents string to a new file rather than printing it.
Have the name of
the new file be dynamically derived from the old name by prepending
&#8216;UPPER&#8217; to the name. For example, if the user specified the file
<code class="docutils literal"><span class="pre">sample.txt</span></code> (from above), the program would create a file
<code class="docutils literal"><span class="pre">UPPERsample.txt</span></code>, containing &#8216;MY FIRST OUTPUT FILE!&#8217;. When the
user specifies the file name <code class="docutils literal"><span class="pre">stuff.txt</span></code>, the resulting file
would be named <code class="docutils literal"><span class="pre">UPPERstuff.txt</span></code>.</li>
</ol>
</div>
<div class="section" id="mad-lib-file-exercise">
<span id="write-madlib3-py"></span><h3>2.5.2.2. Mad Lib File Exercise<a class="headerlink" href="#mad-lib-file-exercise" title="Permalink to this headline">¶</a></h3>
<p>Write <code class="docutils literal"><span class="pre">madlib3.py</span></code>, a small modification
of <code class="docutils literal"><span class="pre">madlib2.py</span></code>, requiring only a modification to the <code class="docutils literal"><span class="pre">main</span></code>
function of <code class="docutils literal"><span class="pre">madlib2.py</span></code>.  (Even better is to start from
<code class="docutils literal"><span class="pre">madlib2a.py</span></code> if you did the exercise in <a class="reference internal" href="ifstatements.html#unique-list-ex"><span>Unique List Exercise</span></a>).
Also create a file <code class="file docutils literal"><span class="pre">myMadlib.txt</span></code>, as described below.</p>
<p>Your <code class="docutils literal"><span class="pre">madlib3.py</span></code> should</p>
<ul class="simple">
<li><em>Prompt</em> the user for the name of a file that should contain a madlib format
string as text (with no quotes around it).</li>
<li>Read in this file and use it as the format string in the <code class="docutils literal"><span class="pre">tellStory</span></code>
function.</li>
</ul>
<p>This is unlike in madlib2.py, where the story is a <em>literal</em> string
coded directly into the program, assigned to the variable <code class="docutils literal"><span class="pre">originalStory</span></code>.
The <code class="docutils literal"><span class="pre">tellstory</span></code>
function and particularly the <code class="docutils literal"><span class="pre">getKeys</span></code> function were developed
and described in detail in this tutorial, but for this exercise
there is no need to follow their inner workings - you are just a
<em>user</em> of the <code class="docutils literal"><span class="pre">tellstory</span></code> function (and the functions that it
calls). You do not need to mess with the code for the definition of
<code class="docutils literal"><span class="pre">tellStory</span></code> or any of the earlier supporting functions  &#8211;
just keep them from the copy you made of madlib2.py for your
madlib3.py.
The original madlib string is already placed in a file <code class="file docutils literal"><span class="pre">jungle.txt</span></code>
as an example of the story file format expected. With the Idle editor, write
another madlib format string into a file <code class="file docutils literal"><span class="pre">myMadlib.txt</span></code>. If you
earlier created a  program myMadlib.py, then you can easily extract
the story from there (without the quotes around it). Test your
program madlib3.py twice, using <code class="file docutils literal"><span class="pre">jungle.txt</span></code> and then
your new madlib story file <code class="file docutils literal"><span class="pre">myMadlib.txt</span></code>.</p>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id2">[1]</a></td><td>If, for some reason, you want to reread this same file while the
same program is running, you need to close it and reopen it.</td></tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2.5. Files</a><ul>
<li><a class="reference internal" href="#writing-files">2.5.1. Writing Files</a></li>
<li><a class="reference internal" href="#reading-files">2.5.2. Reading Files</a><ul>
<li><a class="reference internal" href="#printupper-exercise">2.5.2.1. PrintUpper Exercise</a></li>
<li><a class="reference internal" href="#mad-lib-file-exercise">2.5.2.2. Mad Lib File Exercise</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="graphics.html"
                        title="previous chapter">2.4. Graphics</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="objectsummary.html"
                        title="next chapter">2.6. Summary</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/files.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="objectsummary.html" title="2.6. Summary"
             >next</a> |</li>
        <li class="right" >
          <a href="graphics.html" title="2.4. Graphics"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Hands-on Python Tutorial</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="ch2.html" >2. Objects and Methods</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2019, Dr. Andrew N. Harrington.
      Last updated on Jan 05, 2020.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.1+.
    </div>
  </body>
</html>